**********************************************************************
FGHI                                FIDONET GLOBAL HYPERTEXT INTERFACE
**********************************************************************
Статус:         черновик
Номер редакции: WIP (идёт работа над документом)
Заглавие:       Фидонетовские аватары
Автор:          Mithgol the Webmaster (aka Sergey Sokoloff, 2:5063/88)
Дата редакции:  19 Apr 2014
-+--------------------------------------------------------------------
Содержание:
   1. Статус этого документа
   2. Введение
   3. Ключевые слова для выражения уровней требуемости
   4. Кладжи
   5. Кладж AVATAR
-+--------------------------------------------------------------------

1. Статус этого документа
-+-----------------------

  Этот документ является переводом на русский язык, соответствующим
  черновику Предлагаемого Фидонетовского Стандарта (FSP).

  Оригинал этого документа описывает необязательный фидонетовский
  стандарт, который может использоваться фидошным сообществом.

  Реализация стандарта, определённого в этом документе, не является
  необходимою; но ожидается, что все реализации будут соответствовать
  данному стандарту.

  Распространение этого документа не ограничивается, если в его текст
  при распространении не будут внесены изменения, не упомянутые явно.

2. Введение
-+---------

  Фидонетовскими аватарами являются картинки, служащие графическим
  представлением отдельных авторов эхопочтовых и нетмейловых сообщений
  в Фидонете.

  Этот документ определяет простой, основанный на клуджах, метод
  задания аватара, представляющего автора сообщения.

3. Ключевые слова для выражения уровней требуемости
-+-------------------------------------------------
  
  Ключевые слова "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
  "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY" и
  "OPTIONAL" в оригинале этого документа имеют смысл, соответствующий
  описаниям в стандарте FTA-1006 (основанном на RFC 2119).

  В этом русском переводе используются следующие ключевые выражения:

  "MUST"            : "ДОЛЖЕН", "НАДО"
  "MUST NOT"        : "НЕ ДОЛЖЕН"
  "REQUIRED"        : "НЕОБХОДИМЫЙ", "ТРЕБУЕМЫЙ", "ТРЕБУЕТСЯ"
  "SHOULD"          : "НАДОБНО", "СЛЕДУЕТ"
  "SHOULD NOT"      : "НЕ СЛЕДУЕТ"
  "RECOMMENDED"     : "РЕКОМЕНДУЕМЫЙ", "РЕКОМЕНДУЕТСЯ"
  "NOT RECOMMENDED" : "НЕ РЕКОМЕНДУЕТСЯ"
  "MAY"             : "МОЖЕТ", "МОЖНО"
  "OPTIONAL"        : "НЕОБЯЗАТЕЛЬНЫЙ"

4. Кладжи
-+-------

  Кладжи (также известные под названием кладжевых строк или
  управляющих параграфов) -- это специальные строки, внедряемые
  в текстовое тело фидонетовского сообщения. Иногда кладжи
  обеспечивают поддержку новой адресации и другой управляющей
  информации, иногда они содержат элементы вспомогательных сведений
  об авторе сообщения (его местонахождение, номер ICQ, Jabber ID,
  реальное имя, играющая музыка, настроение, и т. п.). См. технические
  подробности в FTS-4000.

  Кладжам, определённым в следующих разделах, НЕОБХОДИМО иметь
  следующие четыре общие характеристики:

  1) Такому кладжу НЕ ДОЛЖНА предшествовать (ни непосредственно,
     ни иначе) ни одна из обыкновенных (т. е. некладжевых) строк
     сообщения. Другими словами, набор кладжей предшествует остальному
     телу сообщения, и эхопроцессор (тоссер) МОЖЕТ собрать и сохранить
     эти кладжи отдельно, например, в подполях заголовка сообщения
     JAM, или в контрольном блоке сообщения Squish (см. FSP-1037),
     и так далее.

  2) Каждая кладжевая строка ДОЛЖНА начинаться одиночным символом SOH
     (Ctrl+A, ASCII 1).

  3) За этим символом SOH немедленно ДОЛЖНО следовать имя кладжа,
     двоеточие и РЕКОМЕНДУЕМЫЙ НЕОБЯЗАТЕЛЬНЫЙ символ пробела.

  4) Остаток строки содержит значение этого кладжа.

5. Кладж AVATAR
-+-------------

  Именем этого кладжа служит "AVATAR" (без учёта регистра,
  без кавычек).

  Значением этого кладжа является URL аватара, обозначаемого для того
  сообщения, в котором появляется кладж.

  Этому URLу, однако, МОЖЕТ предшествовать одна или несколько
  НЕОБЯЗАТЕЛЬНЫХ подсказок.

  Если такая подсказка является натуральным числом, её СЛЕДУЕТ
  понимать как размер (в байтах) файла аватара. За числом МОЖЕТ
  непосредственно следовать метрический постфикс, например, "k"
  (без кавычек) означает килобайты (1k = 1024 байта), "M" (без
  кавычек) означает мегабайты (1M = 1024k), "G" (без кавычек) означает
  гигабайты (1G = 1024M). Что делает подсказку короче, и ей проще
  поместиться во кладже.

  Если такая подсказка является парою натуральных чисел, разделённых
  символом "x" или "X" (без кавычек), то эти символы СЛЕДУЕТ понимать
  как ширину и высоту (в пикселах) аватара. Например, аватар 300x50
  имеет 300 пикселов в ширину и 50 пикселов в высоту.

  (Браузеры Фидонета МОГУТ изменять размер аватар; однако, они МОГУТ
  использовать подсказки, чтобы выбрать аватар нужного размера, когда
  доступны несколько URLов аватара, как объясняется ниже.)

  Если дано несколько различных подсказок одного типа (например,
  "400x55 256x256" или "14k 8M"), подсказки эти НАДО игнорировать.
  Даже если дано несколько одинаковых подсказок одного типа (например,
  "400x55 400x55" или "14k 14k"), подсказки эти СЛЕДУЕТ игнорировать.

  В одном сообщении МОГУТ появляться несколько кладжей AVATAR. Они
  ДОЛЖНЫ содержать различные URLы по существу одного и того же
  изображения аватара, хотя изображение МОЖЕТ иметь другой размер
  и (или) быть обрезанным под другую ширину и высоту -- и, таким
  образом, браузер Фидонета ДОЛЖЕН иметь возможность выбрать любой
  из указанных URLов, не получив другой аватар.

  Другими словами, делаемый браузером выбор URLа источника аватара
  способен основываться на браузерной поддержке схем URLов, на
  доступности ресурсов, означенных в URLах (интернетовских серверов
  или сервисов, фидонетовских систем, фидонетовских эхопочтовых или
  файловых областей), на данных подсказках, и так далее. Этим
  стандартом дозволяется указывать во кладже любую схему URLа,
  например,

  *) схему "http:" или "https:" для аватар, размещённых в WWW,

  *) схему "ftp:" для аватар, размещённых на FTP,

  *) схему "magnet:" или "ed2k:" для аватар, доступных по файлообмену,

  *) схему "freq:" для аватар, доступных по фидонетовским
     файловым запросам,

  *) схему "faqserv:" для аватар, доступных в автоматических откликах,
     посылаемых фидонетовским нетмейлом так называемыми FAQ-серверами,

  *) схему "fecho:" для аватар, выложенных в фидонетовских фэхах,

  *) схему "area:" для аватар, выложенных в фидонетовской эхопочте.
     Между прочим, аватар и содержащее кладж сообщение МОГУТ быть
     расположены в разных областях эхопочты (например, если есть
     специальная эха для выкладывания UUE-закодированных аватар).

  Примечание 1: этот список примеров не является исчерпывающим.

  Примечание 2: последние четыре схемы (area, fecho, faqserv, freq)
  определены в стандарте FGHI URL. Доступен здесь:

  https://github.com/Mithgol/FGHI-URL/blob/master/FidoURL.rus.txt

**********************************************************************
EOTD                                               END OF THE DOCUMENT
**********************************************************************