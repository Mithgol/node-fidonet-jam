**********************************************************************
FGHI                                FIDONET GLOBAL HYPERTEXT INTERFACE
**********************************************************************
Status:         draft
Revision:       WIP (a work in progress)
Title:          Fidonet avatars
Author:         Mithgol the Webmaster (aka Sergey Sokoloff, 2:5063/88)
Revision Date:  19 Apr 2014
-+--------------------------------------------------------------------
Contents:
   1. Status of this document
   2. Introduction
   3. Key words to indicate requirement levels
   4. Kludges
   5. The AVATAR kludge
-+--------------------------------------------------------------------

1. Status of this document
-+------------------------

  This document is a draft of a Fidonet Standards Proposal (FSP).

  This document specifies an optional Fidonet standard
  that can be used in the Fidonet community.

  Implementation of the standard defined in this document is not
  mandatory, but all implementations are expected to adhere
  to this standard.

  Distribution of this document is unlimited, 
  provided that its text is not altered without notice.

2. Introduction
-+-------------

  Fidonet avatars are pictures that serve as graphical representations
  of individual authors of echomail and netmail messages in Fidonet.

  This document specifies a simple kludge-based method of declaring
  an avatar to represent the message's author.

3. Key words to indicate requirement levels
-+-----------------------------------------

  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
  "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY",
  and "OPTIONAL" in this document are to be interpreted as described
  in FTA-1006 (based on RFC 2119).

4. Kludges
-+--------

  Kludges (also known as klugde lines or control paragraphs) are
  special lines embedded in the text body of a Fidonet message.
  Sometimes kludges are used to support some new addressing and other
  control information, sometimes they contain pieces of auxiliary
  information about the message's author (location, ICQ UIN,
  Jabber ID, real name, current music, mood, etc.) See technical
  details in FTS-4000.

  Kludges defined in the following sections are REQUIRED to have
  the following four common characteristics:

  1) Such kludge MUST NOT be preceded (immediately or otherwise)
     by any of the common (i.e. non-kludge) lines of the message.
     In other words, a set of kludges precedes the rest of the
     message's body, and an echoprocessor (a tosser) MAY collect
     and store these kludges separately, for example, in subfields
     of a JAM message header, in a Squish message control block
     (see FSP-1037), etc.

  2) Each kludge line MUST start with a single SOH character (Ctrl+A,
     ASCII 1).

  3) That SOH character MUST immediately be followed by the kludge's
     name and a colon and a RECOMMENDED OPTIONAL whitespace character.

  4) The rest of the line contains that kludge's value.

5. The AVATAR kludge
-+------------------

  The name of this kludge is "AVATAR" (case-insensitive,
  without quotes).

  The value of this kludge is the URL of the avatar designated
  for the message where the kludge appears.

  That URL, however, MAY be preceded by one or more (space-separated)
  OPTIONAL hints.

  If such hint is a natural number, it SHOULD be interpreted as the
  size (in bytes) of the avatar's file. The number MAY immediately be
  followed by a metric postfix; for example, "k" (without quotes)
  means kilobytes (1k = 1024 bytes), "M" (without quotes) means
  megabytes (1M = 1024k), "G" (without quotes) means gigabytes (1G =
  1024M). That makes a hint shorter and easier to fit in the kludge.

  If such hint is a pair of natural numbers separated by "x" or "X"
  character (without quotes), these numbers SHOULD be interpreted as
  the width and the height (in pixels) of the avatar. For example,
  300x50 avatar is 300 pixels wide, 50 pixels high.

  (Fidonet browsers MAY resize avatars; however, they MAY use hints
  to choose an avatar of the necessary size when several avatar URLs
  are available, as explained below.)

  Several AVATAR kludges MAY appear in the same message. They MUST
  contain different URLs of essentially the same avatar image (though
  the image MAY be resized and/or cropped for different width and
  height) and thus a Fidonet browser MUST be able to choose any of
  the given URLs without getting a different avatar.

  In other words, the browser's choice of an avatar's source URL can
  be based on the browser's support of URL schemes, on availability
  of the resources designated by URLs (Internet servers or services,
  Fidonet systems, Fidonet echomail or file areas), on given hints,
  etc. This standard permits any URL scheme to be given in the kludge,
  for example,

  *) "http:" or "https:" scheme for WWW-hosted avatars,

  *) "ftp:" scheme for FTP-hosted avatars,

  *) "magnet:" or "ed2k:" scheme for avatars
     accessible via file exchange,

  *) "freq:" scheme for avatars accessible via Fidonet file requests,

  *) "faqserv:" scheme for avatars accessible in automated Fidonet
     netmail replies sent by so called "FAQ servers",

  *) "fecho:" scheme for avatars posted in Fidonet file echoes,

  *) "area:" scheme for avatars posted in Fidonet echomail areas.
     By the way, an avatar and a kludge-containing message MAY
     reside in different echomail areas (for example, if there is
     some special echomail area for posting UUE-encoded avatars).

  Note 1: this list of examples is not an exhaustive list.

  Note 2: the latter four schemes (area, fecho, faqserv, freq) are
  defined in the FGHI URL standard.

**********************************************************************
EOTD                                               END OF THE DOCUMENT
**********************************************************************